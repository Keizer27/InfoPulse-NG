<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Blog</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .auth-card {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background: #4285f4;
            color: white;
            border: none;
            cursor: pointer;
        }
        .error {
            color: red;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="auth-card">
        <h2>Admin Login</h2>
        <p>Enter your admin credentials</p>
        
        <input type="email" id="email" placeholder="Email" value="akinpeliusman2018@gmail.com">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Login</button>
        <div id="loginError" class="error"></div>
    </div>

    <script>
        // 1. FIRST FIX: Use CORRECT Firebase config format
        const firebaseConfig = {
            apiKey: "AIzaSyAktxsysnet2v0g8bq3aTmdTm0xy9hmgz", // Fixed format
            authDomain: "infopublic-5x9fb.firebaseapp.com",
            projectId: "infopublic-5x9fb",
            storageBucket: "infopublic-5x9fb.appspot.com",
            messagingSenderId: "5689711e991",
            appId: "1:5689711e991:web:abc123def456" // Add a dummy appId if missing
        };

        // 2. Initialize Firebase
        try {
            const app = firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();
            
            console.log("Firebase initialized successfully!");

            // 3. Login function with enhanced error handling
            function login() {
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const errorElement = document.getElementById('loginError');
                
                errorElement.textContent = '';
                
                firebase.auth().signInWithEmailAndPassword(email, password)
                    .then(() => {
                        console.log("Login success!");
                        window.location.href = "dashboard.html"; // Redirect after login
                    })
                    .catch(error => {
                        console.error("Login error:", error);
                        errorElement.textContent = getErrorMessage(error.code);
                    });
            }

            // 4. Better error messages
            function getErrorMessage(errorCode) {
                const messages = {
                    "auth/invalid-email": "Invalid email format",
                    "auth/user-not-found": "Email not registered",
                    "auth/wrong-password": "Incorrect password",
                    "auth/network-request-failed": "Network error. Check connection"
                };
                return messages[errorCode] || "Login failed. Try again.";
            }

        } catch (error) {
            console.error("Firebase init error:", error);
            document.getElementById('loginError').textContent = 
                "Configuration error. Please contact support.";
        }
    </script>
</body>
</html>
