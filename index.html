<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>InfoPulseNG - Smart Insights for Every Niche</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
</head>
<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="container">
      <a href="/" class="logo">InfoPulse<span>NG</span></a>
      <div class="nav-right">
        <select id="categoryFilter" class="category-filter">
          <option value="all">All Categories</option>
          <option value="tech">Tech</option>
          <option value="finance">Finance</option>
          <option value="health">Health</option>
          <option value="lifestyle">Lifestyle</option>
          <option value="education">Education</option>
          <option value="ecommerce">E-commerce</option>
          <option value="latest-tech">Latest Tech</option>
        </select>
        <button id="darkModeToggle" aria-label="Toggle dark mode">ðŸŒ™</button>
        <button class="hamburger" onclick="location.href='login.html'" aria-label="Menu">â˜°</button>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h2>Welcome to InfoPulseNG</h2>
      <p>Smart content for smart Nigerians. Stay updated across Tech, Finance, Health, Lifestyle, and more.</p>
    </div>
  </section>

  <!-- Main Content -->
  <main class="container">
    <!-- Articles Grid -->
    <div id="articlesContainer" class="articles-grid">
      <!-- Dynamic content will load here -->
      <div class="loader">
        <div class="spinner"></div>
        <p>Loading articles...</p>
      </div>
    </div>

    <!-- Empty State -->
    <div id="emptyState" class="empty-state hidden">
      <i class="fas fa-newspaper"></i>
      <h3>No articles found</h3>
      <p>Try selecting a different category</p>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>Â© 2025 InfoPulseNG. All rights reserved.</p>
    </div>
  </footer>

  <!-- Font Awesome for icons -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
  
  <!-- App JS -->
  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "Aktxsysnet2v0g8bq3aTmdTm0xy9hmgz",
      authDomain: "infopublic-5x9fb.firebaseapp.com",
      projectId: "infopublic-5x9fb",
      storageBucket: "infopublic-5x9fb.appspot.com",
      messagingSenderId: "5689711e991",
      appId: "1:5689711e991:web:abc123def456"
    };
    
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // DOM Elements
    const darkModeToggle = document.getElementById('darkModeToggle');
    const categoryFilter = document.getElementById('categoryFilter');
    const articlesContainer = document.getElementById('articlesContainer');
    const emptyState = document.getElementById('emptyState');

    // Dark Mode Toggle
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    });

    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark-mode');
    }

    // Load Articles
    function loadArticles(category = 'all') {
      articlesContainer.innerHTML = `
        <div class="loader">
          <div class="spinner"></div>
          <p>Loading articles...</p>
        </div>
      `;

      let query = db.collection('articles').orderBy('publishedAt', 'desc');
      
      if (category !== 'all') {
        query = query.where('category', '==', category);
      }

      query.get().then(querySnapshot => {
        if (querySnapshot.empty) {
          showEmptyState();
          return;
        }

        articlesContainer.innerHTML = '';
        querySnapshot.forEach(doc => {
          const article = doc.data();
          articlesContainer.innerHTML += `
            <article class="article-card">
              <img src="${article.imageUrl || 'https://via.placeholder.com/600x400?text=InfoPulseNG'}" alt="${article.title}">
              <div class="article-content">
                <span class="category-tag">${article.category || 'General'}</span>
                <h3><a href="article.html?id=${doc.id}">${article.title}</a></h3>
                <p class="excerpt">${article.excerpt || 'Read more about this topic...'}</p>
                <div class="article-meta">
                  <span><i class="far fa-clock"></i> ${article.readTime || 5} min read</span>
                  <span>${article.publishedAt?.toDate().toLocaleDateString() || 'Just now'}</span>
                </div>
              </div>
            </article>
          `;
        });
      }).catch(error => {
        articlesContainer.innerHTML = `
          <div class="error-state">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Error loading content</h3>
            <p>${error.message}</p>
          </div>
        `;
      });
    }

    function showEmptyState() {
      articlesContainer.innerHTML = '';
      emptyState.classList.remove('hidden');
    }

    // Category Filter
    categoryFilter.addEventListener('change', (e) => {
      loadArticles(e.target.value);
    });

    // Initial load
    document.addEventListener('DOMContentLoaded', () => {
      loadArticles();
    });
  </script>
</body>
</html>
